<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Poker Dashboard</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#07121b;
  --card:#0b1220;
  --muted:#94a3b8;
  --accent:#60a5fa;
}

html,body{
  margin:0;
  min-height:100vh;
  font-family:Inter,system-ui;
  background:linear-gradient(180deg,#071027,#07121b);
  color:#e6eef8;
}

.wrap{max-width:1200px;margin:24px auto;padding:16px}

header{
  display:flex;
  gap:16px;
  align-items:center;
  margin-bottom:16px
}

.card{
  background:linear-gradient(180deg,rgba(255,255,255,.04),transparent);
  border:1px solid rgba(255,255,255,.08);
  border-radius:14px;
  padding:14px
}

.grid{
  display:grid;
  grid-template-columns:1fr 420px;
  gap:14px
}

.controls{
  display:flex;
  gap:12px;
  align-items:center
}

/* ===== DARK DROPDOWN STYLE ===== */
.select-wrap{
  position:relative;
}

.select-wrap select{
  appearance:none;
  -webkit-appearance:none;
  -moz-appearance:none;

  background:linear-gradient(
    180deg,
    rgba(255,255,255,0.08),
    rgba(255,255,255,0.02)
  );
  color:#e6eef8;

  border:1px solid rgba(255,255,255,0.25);
  border-radius:10px;

  padding:8px 36px 8px 12px;
  font-size:14px;
  font-weight:500;

  cursor:pointer;
  outline:none;
}

.select-wrap select:hover{
  border-color:rgba(255,255,255,0.45);
}

.select-wrap select:focus{
  border-color:var(--accent);
  box-shadow:0 0 0 2px rgba(96,165,250,0.25);
}

.select-wrap::after{
  content:"‚ñæ";
  position:absolute;
  right:12px;
  top:50%;
  transform:translateY(-50%);
  color:#cfe6ff;
  font-size:12px;
  pointer-events:none;
}
/* ===== END DROPDOWN ===== */

.chart-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px
}

.chart-box{position:relative;height:220px}
.chart-box.large{height:260px}

canvas{
  width:100%!important;
  height:100%!important
}

.kpi-grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px
}

.kpi{
  background:rgba(255,255,255,.05);
  border-radius:10px;
  padding:10px;
  text-align:center
}

.kpi span{font-size:12px;color:var(--muted)}
.kpi b{font-size:18px}

.small{font-size:12px;color:var(--muted)}
h3{margin:8px 0}

@media(max-width:1000px){
  .grid{grid-template-columns:1fr}
}
</style>
</head>

<body>
<div class="wrap">

<header>
  <div>
    <h2>Poker Dashboard</h2>
    <div class="small">Dropdown dark style ‚Äì d·ªÖ ƒë·ªçc</div>
  </div>
  <div class="controls card">
    <div class="select-wrap">
      <select id="playerSelect"></select>
    </div>
    <div class="select-wrap">
      <select id="dateSelect"></select>
    </div>
  </div>
</header>

<div class="grid">

<section class="card">

  <h3>Theo NG√ÄY ‚Äî K·∫øt qu·∫£ t·ª´ng ng∆∞·ªùi</h3>
  <div class="chart-box large">
    <canvas id="dateBarCanvas"></canvas>
  </div>

  <h3 style="margin-top:16px">üü¢ WIN % ‚Äî TOTAL</h3>
  <div class="chart-box">
    <canvas id="winTotalChart"></canvas>
  </div>

  <h3>üî¥ LOSE % ‚Äî TOTAL</h3>
  <div class="chart-box">
    <canvas id="loseTotalChart"></canvas>
  </div>

  <h3 style="margin-top:16px">üü¢ WIN % ‚Äî THEO NG√ÄY</h3>
  <div class="chart-box">
    <canvas id="winDayChart"></canvas>
  </div>

  <h3>üî¥ LOSE % ‚Äî THEO NG√ÄY</h3>
  <div class="chart-box">
    <canvas id="loseDayChart"></canvas>
  </div>

</section>

<aside class="card">
  <h3 id="playerTitle">Player</h3>

  <div class="kpi-grid">
    <div class="kpi"><span>Total</span><b id="kTotal">0</b></div>
    <div class="kpi"><span>Avg</span><b id="kAvg">0</b></div>
    <div class="kpi"><span>Win</span><b id="kWin">0</b></div>
    <div class="kpi"><span>Loss</span><b id="kLoss">0</b></div>
    <div class="kpi"><span>Best</span><b id="kMax">0</b></div>
    <div class="kpi"><span>Worst</span><b id="kMin">0</b></div>
  </div>

  <h3 style="margin-top:16px">Theo NG∆Ø·ªúI ‚Äî Time Series</h3>
  <div class="chart-box large">
    <canvas id="playerLineCanvas"></canvas>
  </div>
</aside>

</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded',()=>{

const players=['Th·ªßy','Trung','Th·∫°nh','Tr·ªçng','Ho√†ng','T√†i','Quang','Nh√£','V·ªπ','Th·ªãnh','Hi·ªÅn'];
const COLORS=['#4F46E5','#22C55E','#F59E0B','#EF4444','#06B6D4','#8B5CF6','#F97316','#10B981','#3B82F6','#EC4899','#84CC16'];
const rawRows=[
{date:'2026-01-09',vals:[null,-100,null,-100,184,null,35,-19,null,null,null]},
{date:'2026-01-12',vals:[-100,-200,null,195,121,-100,84,null,null,null,null]},
{date:'2026-01-13',vals:[510,-200,-4,-19,-138,-36,87,-200,null,null,null]},
{date:'2026-01-13C',vals:[-243,-400,417,-39,605,-200,-40,null,-100,null,null]},
{date:'2026-01-14',vals:[280,237,-100,-200,-181,-77,41,null,null,null,null]},
{date:'2026-01-15',vals:[168,-34,null,-130,366,-400,-71,null,null,101,null]},
{date:'2026-01-15C',vals:[-400,-60,-200,267,-80,473,null,null,null,null,null]},
{date:'2026-01-16',vals:[0,598,null,-41,-10,-133,46,176,-143,-193,-300]}
];

const sum=a=>a.reduce((s,x)=>s+(isFinite(x)?x:0),0);
const avg=a=>a.length?sum(a)/a.length:0;

const dates=rawRows.map(r=>r.date);
const series={};
players.forEach((p,i)=>series[p]=rawRows.map(r=>r.vals[i]).map(v=>isFinite(v)?v:null));

players.forEach(p=>playerSelect.add(new Option(p,p)));
dates.forEach(d=>dateSelect.add(new Option(d,d)));

const anim={animation:{duration:600,easing:'easeOutQuart'},maintainAspectRatio:false};

function doughnut(id){
  return new Chart(document.getElementById(id),{
    type:'doughnut',
    data:{labels:[],datasets:[{data:[],backgroundColor:[]}]},
    options:{cutout:'55%',plugins:{legend:{position:'bottom'}},...anim}
  });
}

const winTotalChart=doughnut('winTotalChart');
const loseTotalChart=doughnut('loseTotalChart');
const winDayChart=doughnut('winDayChart');
const loseDayChart=doughnut('loseDayChart');

const dateBarChart=new Chart(dateBarCanvas,{type:'bar',data:{labels:players,datasets:[{data:[]}]},options:{plugins:{legend:{display:false}},...anim}});
const playerLineChart=new Chart(playerLineCanvas,{type:'line',data:{labels:dates,datasets:[]},options:{plugins:{legend:{display:false}},tension:.25,...anim}});

function updateTotal(){
  const win=[],lose=[];
  players.forEach((p,i)=>{
    const total=sum(series[p]);
    if(total>0) win.push({p,val:total,c:COLORS[i]});
    if(total<0) lose.push({p,val:Math.abs(total),c:COLORS[i]});
  });
  winTotalChart.data.labels=win.map(x=>x.p);
  winTotalChart.data.datasets[0].data=win.map(x=>x.val);
  winTotalChart.data.datasets[0].backgroundColor=win.map(x=>x.c);
  winTotalChart.update();

  loseTotalChart.data.labels=lose.map(x=>x.p);
  loseTotalChart.data.datasets[0].data=lose.map(x=>x.val);
  loseTotalChart.data.datasets[0].backgroundColor=lose.map(x=>x.c);
  loseTotalChart.update();
}

function updateDay(){
  const row=rawRows.find(r=>r.date===dateSelect.value);
  const win=[],lose=[];
  row.vals.forEach((v,i)=>{
    if(v>0) win.push({p:players[i],val:v,c:COLORS[i]});
    if(v<0) lose.push({p:players[i],val:Math.abs(v),c:COLORS[i]});
  });
  winDayChart.data.labels=win.map(x=>x.p);
  winDayChart.data.datasets[0].data=win.map(x=>x.val);
  winDayChart.data.datasets[0].backgroundColor=win.map(x=>x.c);
  winDayChart.update();

  loseDayChart.data.labels=lose.map(x=>x.p);
  loseDayChart.data.datasets[0].data=lose.map(x=>x.val);
  loseDayChart.data.datasets[0].backgroundColor=lose.map(x=>x.c);
  loseDayChart.update();

  dateBarChart.data.datasets[0].data=row.vals.map(v=>isFinite(v)?v:0);
  dateBarChart.update();
}

function updatePlayer(){
  const p=playerSelect.value;
  const s=series[p].filter(v=>v!==null);
  playerTitle.textContent=`${p} ‚Äî Player Performance`;
  kTotal.textContent=sum(s);
  kAvg.textContent=avg(s).toFixed(1);
  kWin.textContent=s.filter(v=>v>0).length;
  kLoss.textContent=s.filter(v=>v<0).length;
  kMax.textContent=Math.max(...s);
  kMin.textContent=Math.min(...s);

  playerLineChart.data.datasets=[{label:p,data:series[p],borderWidth:2}];
  playerLineChart.update();
}

playerSelect.onchange=updatePlayer;
dateSelect.onchange=updateDay;

playerSelect.value=players[0];
dateSelect.value=dates[0];

updateTotal();
updateDay();
updatePlayer();

});
</script>

</body>
</html>
